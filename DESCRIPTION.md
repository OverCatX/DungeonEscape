# 🐉 Dungeon Escape

**GitHub**: https://github.com/OverCatX/DungeonEscape

---

##  Overview
**Dungeon Escape** is a Python-based 2D top-down roguelike combining action, tactical survival, and procedural generation. The game is developed using `pygame`, with additional components such as data analytics and UI visualization via `matplotlib`, `tkinter`, and `pandas`.

Players traverse procedurally generated dungeons stage-by-stage, each consisting of multiple enemy waves and randomized traps. With three uniquely skilled characters and stat tracking at every turn, players not only fight to survive — they evolve through data.

---

## ⚖️ Game Architecture & Algorithms

### 🌌 Overall Structure
The game consists of modular components:
- `entities/` – player, enemy, and item logic
- `map/` – random map generation
- `ui/` – HUD, menu, and character select
- `stats/` – session and player data collection
- `visualizer/` – graph viewer with tkinter/matplotlib
- `game.py` – main game controller and loop

### Procedural Map Generation
- Each dungeon level is generated by `RandomMapGenerator`.
- It constructs a 2D grid filled with walls, floors, and random trap types.
- A pathable **exit** is placed using constraints: it must be surrounded by walkable floor tiles to guarantee reachability.

### Wave & Stage System
- Every stage contains `n` waves of enemies (`n` increases with stage).
- After all enemies in a wave are defeated, the next wave spawns.
- After all waves, the **exit** becomes active.
- On reaching the exit, the game fades and generates the next stage procedurally.
- Data is saved and player state updated between transitions.

### Enemy AI (Pathfinding & Avoidance)
- Enemies approach the player using direct vector-based movement.
- To avoid stacking, they apply a separation force using overlap checks with other enemies.
- Some enemies (e.g., Rusher) use timed behaviors to dash toward the player.

### Player Mechanics
- Player class handles movement, attack, dash, animation, and stat tracking.
- Each subclass (Assassin, Archer, Blink) overrides attack logic:
  - **Assassin** uses short-range thrust
  - **Archer** fires spread arrows (3 directions)
  - **Blink** teleports behind an enemy and attacks
- Dash drains energy, and traps cause knockback and damage.

### Stat Logging
- `player_data.py` tracks per-session stats: time played, distance, dash used, traps hit, enemies killed, survival.
- Data is saved in `session_log.csv` and summarized per player in `players.csv`
- On death or stage completion, data is flushed and stored.

### Visualization System
- Graphs are built using `matplotlib` and shown via `tkinter` UI.
- Allows players to explore their playstyle via different plots (scatter, bar, pie, etc.)
- A dropdown menu enables easy switching between graph types.

---

## Character Classes

- **Assassin**: Agile melee specialist. High risk, high reward.
- **Archer**: Ranged burst attacker. Keeps safe distance, but fragile.
- **Blink**: AoE burst + teleport. Good for groups but requires cooldown management.

---

## Features Highlight

- Procedural map & exit placement (100% reachable)
- Wave-based combat system
- Traps: spike, poison, timed-spike
- Health pickup + knockback damage system
- Dash & energy bar mechanics
- Session stat tracking in CSV
- Visualizer UI with graphs (Histogram, Scatter, Pie, Bar, Line)
- Save/load overall player stats
- Restart & resume stage logic

---

## Visualization Previews
![Histogram](https://github.com/OverCatX/DungeonEscape/raw/main/screenshots/visualization/Histogram_Time_Spending.png?raw=true)
![Bar](https://github.com/OverCatX/DungeonEscape/blob/main/screenshots/visualization/Bar_Average_Dash_by_Charactor.png?raw=true)
![Scatter](https://github.com/OverCatX/DungeonEscape/blob/main/screenshots/visualization/Scatter_Enemies_vs_Survival.png?raw=true)
![Pie](https://github.com/OverCatX/DungeonEscape/blob/main/screenshots/visualization/Pie_Chart_Charactor_Used.png?raw=true)
![Line](https://github.com/OverCatX/DungeonEscape/blob/main/screenshots/visualization/Line_Distance_Traveled.png?raw=true)

---

## UML & Project Structure
See `screenshots/uml/uml_diagram.png` or link below:
```
DungeonEscape/
├── game.py
├── entities/      # Player, Enemy, Items
├── ui/            # Menus, HUD
├── map/           # RandomMapGenerator
├── db/            # PlayerDB
├── stats/         # CSV save files
├── visualizer/    # tkinter viewer
```

---

## Run Instructions
```bash
git clone https://github.com/OverCatX/DungeonEscape.git
cd DungeonEscape
pip install -r requirements.txt
python main.py
```

> Uses: `pygame`, `matplotlib`, `pandas`, `numpy`, `tkinter`

---

## 🎬 Video Presentation
🎥 https://youtube.com/your_video_link

---

## License
MIT License (see `LICENSE` file)